webpackJsonp([3],{"+iD3":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("3cXf"),o=s.n(i),c={name:"cart",data:function(){return{selectedList:[],value:1,ischeckAll:!1,goodsList:[],total:0,cart:[]}},methods:{changeNum:function(t,e){var s=JSON.parse(localStorage.getItem("cart_goodsList"));s[e.name].number=t,localStorage.setItem("cart_goodsList",o()(s)),this.sum()},confirmOrder:function(){0!==this.goodsList.length?0!==this.selectedList.length?(localStorage.setItem("confirmOrder",o()(this.selectedList)),this.$router.push("/confirmOrder")):this.$toast({type:"fail",message:"请先选择商品~~"}):this.$toast({type:"fail",message:"购物车目前空空如也~~"})},goGoods:function(t){sessionStorage.setItem("goodsTitle",t.name),sessionStorage.setItem("goodsPrice",t.price),sessionStorage.setItem("goodsId",t.goodsId),sessionStorage.setItem("goodsImg",t.img),sessionStorage.setItem("goodsNumber",t.number),sessionStorage.setItem("goodsSpec",t.spec),this.$router.push({name:"goods"})},single:function(t){var e=this.selectedList.indexOf(t);e>-1?this.selectedList.splice(e,1):this.selectedList.push(t),this.selectedList.length===this.goodsList.length?this.ischeckAll=!0:this.ischeckAll=!1,this.sum()},checkAll:function(t){if(this.ischeckAll)this.$refs.checkboxGroup.toggleAll(),this.selectedList=[];else{this.$refs.checkboxGroup.toggleAll(!0);var e=[];t.forEach(function(t){e.push(t)}),this.selectedList=e}this.sum(),this.ischeckAll=!this.ischeckAll},sum:function(){var t=this;this.total=0,this.selectedList.forEach(function(e,s){t.total=t.total+e.number*(100*e.price)}),this.total=this.total},singleDelete:function(t){console.log(this.selectedList.indexOf(t));var e=this.selectedList.indexOf(t);e>-1&&this.selectedList.splice(e,1),this.goodsList.splice(this.goodsList.indexOf(t),1),localStorage.setItem("cart_goodsList",o()(this.goodsList)),this.ischeckAll=this.goodsList.length>0&&this.ischeckAll,this.sum()},MultiDelete:function(){for(;this.selectedList.length>0;)this.singleDelete(this.selectedList[0]);this.$toast({type:"success",message:"删除成功~~"}),this.selectedList=[],this.sum()}},activated:function(){var t=localStorage.getItem("cart_goodsList");t&&(this.goodsList=JSON.parse(t))},deactivated:function(){this.total=0,this.selectedList=[],this.ischeckAll=!1}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"cart"}},[s("van-sticky",[s("header",{class:{bgWhite:0==t.goodsList.length}},[s("i",{staticClass:"iconfont icon-back",on:{click:function(e){return t.$router.go(-1)}}}),t._v(" "),s("span",[t._v("购物车")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.goodsList.length>0,expression:"goodsList.length>0"}],staticClass:"count"},[s("p",[s("van-divider",{style:{color:"#fff"},attrs:{"content-position":"left"}},[t._v("共"+t._s(t.goodsList.length)+"件商品")])],1)]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:0==t.goodsList.length,expression:"goodsList.length==0"}],staticClass:"empty"},[t._v("购物车空空如也~~")]),t._v(" "),s("van-checkbox-group",{ref:"checkboxGroup",model:{value:t.selectedList,callback:function(e){t.selectedList=e},expression:"selectedList"}},t._l(t.goodsList,function(e,i){return s("div",{key:i,staticClass:"row"},[s("van-swipe-cell",[s("template",{slot:"default"},[s("div",{staticClass:"left"},[s("van-checkbox",{attrs:{name:e},on:{click:function(s){return t.single(e)}}})],1),t._v(" "),s("div",{staticClass:"right"},[s("img",{attrs:{src:e.img,alt:""},on:{click:function(s){return t.goGoods(e)}}}),t._v(" "),s("div",{staticClass:"info",on:{click:function(s){return t.goGoods(e)}}},[s("p",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"spec"},[t._v(t._s(e.spec))]),t._v(" "),s("p",{staticClass:"price"},[t._v("¥"+t._s(e.price))])]),t._v(" "),s("van-stepper",{attrs:{name:i},on:{change:t.changeNum},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"val.number"}})],1)]),t._v(" "),s("template",{slot:"right"},[s("van-button",{attrs:{square:"",type:"danger",text:"删除"},on:{click:function(s){return t.singleDelete(e)}}})],1)],2)],1)}),0),t._v(" "),s("van-submit-bar",{attrs:{price:t.total,"button-text":"结算"},on:{submit:t.confirmOrder}},[s("template",{slot:"default"},[s("div",{staticClass:"btn"},[s("van-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.goodsList,expression:"goodsList"}],on:{click:function(e){return t.checkAll(t.goodsList)}},model:{value:t.ischeckAll,callback:function(e){t.ischeckAll=e},expression:"ischeckAll"}},[t._v("全选")]),t._v(" "),s("van-button",{directives:[{name:"show",rawName:"v-show",value:t.selectedList.length>0,expression:"selectedList.length>0"}],attrs:{plain:"",hairline:"",type:"primary",round:""},on:{click:t.MultiDelete}},[t._v("删除")])],1)])],2)],1)},staticRenderFns:[]};var l=s("C7Lr")(c,n,!1,function(t){s("i1gs")},"data-v-5d285e43",null);e.default=l.exports},"3cXf":function(t,e,s){t.exports={default:s("L+o2"),__esModule:!0}},"L+o2":function(t,e,s){var i=s("ZuHZ"),o=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},i1gs:function(t,e){}});
//# sourceMappingURL=3.58cbeed32a3f98ef0671.js.map